<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
                Learning Laravel
        
  </title>
  <meta itemprop="description" name="description" content="This site is powered by Jekyll and hosted on Github." >

  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Home" /><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Learning Laravel | Home</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Learning Laravel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Laravel is open-source php web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications." />
<meta property="og:description" content="Laravel is open-source php web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications." />
<link rel="canonical" href="http://localhost:4000/Laravel-Basics/" />
<meta property="og:url" content="http://localhost:4000/Laravel-Basics/" />
<meta property="og:site_name" content="Home" />
<meta property="og:image" content="http://localhost:4000/laravel.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-15T00:00:00+00:00" />
<script type="application/ld+json">
{"headline":"Learning Laravel","description":"Laravel is open-source php web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications.","datePublished":"2018-11-15T00:00:00+00:00","dateModified":"2018-11-15T00:00:00+00:00","@type":"BlogPosting","image":"http://localhost:4000/laravel.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Laravel-Basics/"},"url":"http://localhost:4000/Laravel-Basics/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="shortcut icon" href="/assets/images/favicon.png"/>
</head>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Learning Laravel | Home</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Learning Laravel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Laravel is open-source php web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications." />
<meta property="og:description" content="Laravel is open-source php web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications." />
<link rel="canonical" href="http://localhost:4000/Laravel-Basics/" />
<meta property="og:url" content="http://localhost:4000/Laravel-Basics/" />
<meta property="og:site_name" content="Home" />
<meta property="og:image" content="http://localhost:4000/laravel.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-15T00:00:00+00:00" />
<script type="application/ld+json">
{"headline":"Learning Laravel","description":"Laravel is open-source php web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications.","datePublished":"2018-11-15T00:00:00+00:00","dateModified":"2018-11-15T00:00:00+00:00","@type":"BlogPosting","image":"http://localhost:4000/laravel.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Laravel-Basics/"},"url":"http://localhost:4000/Laravel-Basics/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <body><header class="site-header" role="banner">

  <div class="wrapper">
    <a class="site-title" href="/"><img src="/assets/images/home.png"></a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/categories/">Categories</a><a class="page-link" href="/tutorials/">Tutorials</a></div>
      </nav></div>
  <!-- for language selector
    
       
       <a href="" class=""></a>
       
       <a href="" class=""></a>
       
       <a href="" class=""></a>
       
       <a href="" class=""></a>
       
       <a href="" class=""></a>
       
       <a href="" class=""></a>
       
       <a href="" class=""></a>
       
  -->
  
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <header class="post-header">

    <h5 class="post-title p-name" itemprop="name headline">Learning Laravel</h5>

    <p class="post-meta">
      <time class="dt-published" datetime="2018-11-15T00:00:00+00:00" itemprop="datePublished">Nov 15, 2018
      </time>

   <!-- page category -->
<div class="post-categories">
        

        
         Category: <a href="/categories/#Framework">Framework</a>
            
        
</div>

</header>



  <div class="post-content e-content" itemprop="articleBody">
    <h4>Laravel is open-source php  web framework, based on Symfony that follows Model-View-Controller(MVC) architectural pattern and intended for development of web applications.</h4>

<!--continue-->
<ol>
<h3><li>Installation</li></h3>
Using Composer<br />
<pre>composer create-project laravel/laravel <i>projectname</i> --prefer-dist</pre>



<h3><li>Laravel App Skeleton</li></h3>
<pre>
app/		*bulk of app(models,controllers,route definitions, commands, PHP domain code)  
config/		*config. files for db conn.,queue, mail settings etc. 
		each file returns an array,each value of array can be accessed using config key; 
		format example: filename.key1.key2
database/	*db migrations and seeds
public/		*public facing files like img.,stylesheets,scripts,downloads.
		*index.php which kicks off bootstrapping process and routes all requests. 
resources/      *non-PHP files like views, language files, src. JS files, Sass/LESS 
routes/		*HTTP routes, console routes or Artisan commands 
   --&gt;web.php   *web routes
   --&gt;api.php   *API routes            

storage/	*caches, logs and compiled system files
tests/		*unit and integration tests
                For tests, create file ending with test.php in tests dir. &amp; run ./vendor/bin/phpunit
vendor/		*composer installed dependencies for remote servers
   
.env		*file to dictate the environment variables.
.env.example    *template file that env. duplicates to create .env file
.gitattributes  *git config. file
.gitignore	*git config. file
artisan/ 	*file that allows to run artisan commands
composer.json	*user-editable composer's config. file
composer.lock   *not-editable composer's config. file
gulpfile.js	*optional config file for Elixir and Gulp(for compiling &amp; processing frontend assets
package.json	*similar to composer.json for frontend assets
phpunit.xml	*config. file for PHPUnit(tool for testing out of the box)
readme.md	*markdown file for Intro. of Laravel
server.php	*backup server for laravel app  to light-weight server 
</pre>
   
  
<h3><li>Understanding Routing</li></h3>
<ul>  
    Simple way:  match Path with Closure.<br />
             Example:<pre>
//routes/web.php
Route::get('/',function(){ return 'Hello, World!'; } );
</pre>
     
         Route verbs: <br />
        <pre>
	 Route::post('/',function(){});
         Route::put('/',function(){});
	 Route::delete('/',function(){});
	 Route::any('/',function(){});
         Route::match(['get','post'],'/',function(){}); 
</pre>

<li>
Route using Controller name and method as a string
<pre>Route::get('/','GreetingController@index');</pre>  
</li>

<li>
Route Parameters(variable segment of URL) can be defined in route and passed to closure. 
<br /> Example: <br />  
<pre>Route::get('users/{id}/booklists', function($id){});</pre>   
    	<br />-&gt;Order is left to right: <pre>Route::get('users/{userId}/comments/{commentId}', function($userId,$commentId){});</pre> 
                        <br />-&gt;Optional Route parameter with ?
                		 <pre>Route::get('users/{id?}',function($id='fallbackId'){} );</pre>  
	          	<br />-&gt;Regular expression route constraints   
			  <pre>Route::get('users/{id}',function($id){ })-&gt;where('id','[0-9]+');
Route::get('users/{username}',function($username) { })-&gt;where('username','[A-Za-z]+');
Route::get('posts/{id}/{slug}',function($id,$slug){ })-&gt;where(['id'=&gt;'[0-9]+', 'slug'=&gt;'[A-Za-z]+']);</pre> 
</li> 

	<li> Route Names <br /> 
            <br />Using URL helper to refer routes:<br />
		Example:<pre> &lt; a href="&lt;?php echo url('/'); ?&gt;"&gt; </pre> 
		<br />
			//defining route with name in routes/web.php   <br />
		       <pre>Route::get('members/{id}', 'MembersController@show')-&gt;name('members.show');</pre>    
  			
			//link the route in a view using route() helper
			<br /><pre> &lt;a href="&lt;?php echo route('members.show',['id'=&gt;13]); ?&gt;"&gt; </pre>
                <br /> To Pass Route Parameters to the route() helper, 
			define the route parameters while using route() helper.<br /><br />
				Examples:<br />
					//http://himaliworld.com/users/1/comments/2 
				<pre>route('users.comments.show',[1,2])
 route('users.comments.show',['userId'=&gt;1,'commentId'=&gt;2]
</pre> 
				//http://himaliworld.com/users/1/comments/2?opt=a
			       <pre>route('users.comments.show',['userId'=&gt;1, 'commentId'=&gt;2, 'opt'=&gt;'a'])</pre> 
        <br /></li>
   </ul> 

<h3><li>Using command line Companion: Artisan</li></h3>
<pre>
php artisan changes  
php artisan --version
php artisan route::list //display table with all routes
php artisan tinker     //starts REPL(an interactive shell) to enter php commands
			in the context of the application and seed output)
php artisan down    //bring application into maintainence mode
php artisan up      //exit maintainence mode
php artisan optimize //trim &amp; merge common classes in one file: storage/framework/compiled.php  
        		//if app.debug is set to true, classes will not be compiled
 			// --force flag to override
php artisan route:cache  //cache the routes of application
php artisan list: gives follwoing entries under make namespace
        make:command
        make:console
        make:controller
        make:event
        make:middleware
        make:migration
        make:model
        make:provider
        make:request
Usage Examples:
        php artisan make:model library --no-migration
        //creates Eloquent Model class called library at app/library.php
        // without makting migration tables.
php artisan make:command --help
</pre>


<h3><li>Database and Eloquent</li></h3>
Eloquent is a Laravel's ActiveRecord ORM(object-relational mapper).
There is one class per table, which is responsible for retrieving, representing and persisting data in that table.<br />
Configuration File: config/database.php<br />
Database connections: multiple drivers are supported, multiple connections within the same application is also possible.
Other db connections:Asking for specific connection can be done as:<pre> $users =DB::connection('secondary')-&gt;select('select * from users');</pre>

<b>Migrations</b><br />
A migration is a single file that has:<br />
up() method to do its migration and down() method to undo whatever changes the up migration made.

Creating migration<pre>php artisan make:migration create_users_table
php artisan make:migration add_names_to_users_table --table=users
php artisan make:migration create_users_table --create=users
</pre> 

Creating tables:<pre>//Everything we do in migration rely on the methods of Schema. Use the create() method to create new table.
Schema::create('tablename', function(Blueprint $table){
	// Create columns here
});</pre>
Creating columns:<pre>//Bluprint instances can be used for creating columns
Schema::create('users', function(Blueprint $table){
	$table-&gt;string('name');
});</pre>
<h5>Following are some of Blueprint methods:<h5><pre>integer(colName), tinyInteger(colName), smallInteger(colName), mediumInteger(colName), bigInteger(colName)
string(colName, OPTIONAL length) // adds a varchar type column
binary(colName)	//adds a BLOB type column
boolean(colName)
char(colName,length)
datetime(colName)
decimal(colName, precision, scale)
double(colName, total digits, digits after decimal)
enum(colName,[choice1, choice2])
float(colName)
json(colName) and jsonb(colName)
text(colName), mediumText(colName), longText(colName)
time(colName)
timestamp(colName)
uuid(colName)  //char(36) in MySQL</pre>
<h5>Other combined blueprint methods:</h5><pre>softdeletes() //adds a deleted_at timestamp  
morphs(colName) //eg. morphs('tag') adds integer tag_id and string tag_type   
		// used in polymorphic relationships
rememberToken() //adds a remember_token column(Varchar(100)) for user "remember me" tokens
timestamps() and nullableTimestamps()</pre>

<h5>Adding extra properties</h5><pre>Schema::table('user',function(Blueprint $table){
$table-&gt;string('email')-&gt;nullable()-&gt;after('last_name');
});</pre>
<h5>More of the addtional properties are:</h5><pre>nullable()
default('default content')
unsigned()
first() //places the column first in the column order
$table-&gt;index('amount','optional_index_name');</pre>
unique() //adds a unique index
primary()
index()&lt;/pre&gt;

Dropping tables:<pre>Schema::drop('table_name');</pre>
Modifying columns:<h5>Before,add the doctrine/dbal package in composer.json and update composer
<pre>//changing string length to 100
Schema::table('users', function($table){
	$table-&gt;string('name', 100)-&gt;change();
});
//adjusting properties in the method name, eg. making nullable
Schema::table('contacts', function($table){
	$table-&gt;string('deleted_at')-&gt;nullable()-&gt;change();
});
//rename a column
  $table-&gt;renameColumn('advancing', 'advanced');
//drop a column
  $table-&gt;dropColumn('nickname');
</pre>

Indexes and Foreign keys<br />
<pre> Adding column indexes in migrations
$table-&gt;primary('primary_id'); //unnecessary if present increments()
$table-&gt;primary(['first_name','last_name']); //composite keys
$table-&gt;unique('email');  //unique index
$table-&gt;unique('email', 'optional_index_name');
$table-&gt;index('amount'); //basic index
$table-&gt;index('amount','optional_index_name');</pre>
<h5>Removing indexes</h5><pre>$table-&gt;dropPrimary('contacts_id_primary');
$table-&gt;dropUnique('contacts_email_unique);
$table-&gt;dropIndex('optional_index_name');
$table-&gt;dropIndex(['email','amount']);</pre>

<h5>Adding and Removing Foreign keys</h5><pre> $table-&gt;foreign('user_id')-&gt;refernces('id')-&gt;on('users');
//specifying foreign key contraints with onDelete() or onUpdate()
$table-&gt;foreign('user_id')
	-&gt;references('id')
	-&gt;on('users')
	-&gt;onDelete('cascade');
//dropping an index by referencing its index name(combination of column name and table being referenced)  
$table-&gt;dropForeign('contacts_user_id_foreign');
//dropping an index by passing it an array of the fields that it's referencing on the local table
$table-&gt;dropForeign(['user_id']);</pre>

Running Migrations<pre>php artisan migrate
php artisan migrate --seed //runs migration and then seeds
php artisan migrate:install //creates table that tracks migrations status
php artisan migrate:reset  //rolls back all the migrations made by install
php artisan migrate:refresh  //resets and installs
php artisan migrate:rollback --step=1 // rolls back number of migrations specified
php artisan migrate:status</pre>

<b>Seeding</b><br />
dabatase/seeds folder comes with DatabaseSeeder class, which has run() method.
<pre>//seeding along with migration 
php artisan migrate --seed
php artisan migrate:refresh --seed
//seeding independently
php artisan db:seed
php artisan db:seed --class=ContactsTableSeeder</pre>

<h5>Creating a Seeder</h5><pre>php artisan make:seeder ContactsTableSeeder
//creates ContactsTableSeeder in database/seeds directory

//edit database/seeds/DatabaseSeeder.php to run when we run our seeders
	public function run(){
		$this-&gt;call(ContactsTableSeeder::class);
	}
//edit the seeder itself in ContactsTableSeeder using DB facade which creates only one record manually
     DB::table('contacts')-&gt;insert([
			'name'=&gt; 'abcdef'
			'email' =&gt; 'ghi@jkl.mno',
		]);
</pre>
Model Factories: define one or more patterns for creating fake entries for datbase tables<pre>
$factory-&gt;define(User::class, function(Faker\Generator $fake){
	return[	'name' =&gt; $faker-&gt;name, ];
});
$factory-&gt;define('users', function(Faker\Generator $faker){
	return[ 'name' =&gt; $faker-&gt;name, ];
});</pre>

Creating a Model Factory<br />
Defined in database/factories/ModelFactory.php
<pre>//simplest factory
$factory-&gt;define(Contact::class, function(Faker\Generator $faker){
      return['name' =&gt; 'abc def','email'=&gt;'ghi@jkl.mno', ];  
});
//with this we can use factory() global helper to create an instance of Contact in seeding &amp; testing
//create one
$contact = factory(Contact::class)-&gt;create();
//create many
factory(Contact::class, 20)-&gt;create();

//because the above instances becom repetitive, Fakeer helps randomize the creation of structured fake data
$factory-&gt;define(Contact::class, function(Faker\Generator $faker){
	return[  'name' =&gt; $faker-&gt;name, 'email' =&gt; $faker-&gt;email, ];  }); 
</pre>

Using a Model Factory
<br /><pre>//for seeding
//create() saves the instance into database instantly
//make() creates the instance but doesn't yet save it to db
factory(Post::class)-&gt;create([
         'title' =&gt; 'This is my post'
]);
factory(User::class, 20)-&gt;create()-&gt;each(function($u) use($post){
	$post-&gt;comments()-&gt;save(factory(Comment::class)-&gt;make(['user_id'=&gt;$u-&gt;id]));
});
//using an array to make() or create() overrides specific keys, above sets user_id on the comment and manually set the title of post
//second parameter in factory()helper indicates the creation of more than one instance ...above each()method is used to add a comment from each newly created user
</pre>
<h5>Accessing multiple model factory types</h5>
<pre>
$factory-&gt;define(Contact::class, function(Faker\Generator $faker){
	return [ 'name' =&gt; $faker-&gt;name, 'email' =&gt; $faker-&gt;email, ]);
});

//defining model for vip contacts in above factory model
 $factory-&gt;defineAs(Contact::class, 'vip', function(Faker\Generator $faker){
   return[
	'name' =&gt; $faker-&gt;name,
	'email' =&gt; $faker-&gt;email,
	'vip'  =&gt; true,
	];
});
//because there is duplication of data, above can be extended by using $factory-&gt;raw()
$factory-&gt;defineAs(Contact::class, 'vip',
 function(Faker\Generator $faker) use ($factory) {
	$contact = $factory-&gt;raw(Contact::class);
	return array_merge($contact, ['vip' =&gt; true]);
  });
//make a specific type
  $vip = factory(Contact::class, 'vip')-&gt;create();
  $vip = factory(Contact::class, 'vip', 3)-&gt;create();
</pre> 

<b>Query Builder</b><br />
Laravel's db architecture can connect to MySQL, Postgres, SQLite and SQL Server through a single interface.
Fluent Interface is available in Laravel that uses method chaining to provides a simpler API.
<pre> //non-fluent 
$users = DB::select(['table' =&gt; 'users', 'where' =&gt; ['type'=&gt; 'tall']]);
//fluent
$users = DB::table('users')-&gt;where('type','tall')-&gt;get();
</pre>
<h5>Basic DB Facade usage examples</h5>
<pre>//basic DB facade and statement()
DB::statement('drop table users')
//using raw calls like select(),insert(),update(),delete(), and parameter binding
DB::select('select * from contacts where validated=?',[true]);
//select using fluent builder
$users = DB::table('users')-&gt;get();
//joins and other complex calls
DB::table('users')
    -&gt;join('contacts',function($join){
		 $join-&gt;on('users.id','=','contacts.user_id')
			-&gt;where('contacts.type','tall');
    })
   -&gt;get();
</pre>
<h5>RAW SQL</h5>
<pre>
//raw select
$users = DB::select('select * from users');
//parameter bindings and named bindings, allows use of PDO parameter
$booksOfCategory = DB::select(
	'select * from books where category = ?',
	[$category]
   );
   //parameters can be named for clarity
 $booksOfCategory = DB::select(
	'select * from books where category = :category',
		['category' =&gt; $bookCategory]
	);
//raw insert
    DB::insert(
	'insert into contacts(name,email) values(?,?)',['abc', 'zyx@wvu.tsr']
	);
//raw updates
   $countUpdated = DB::update(
	'update contacts set status= ? where id = ?',
	['tall', $id]
	);
//raw deletes
	$countDeleted = DB::delete(
		'delete from contacts where archived = ?',
		[ture]
	);
</pre>
<h5>chaining with query builder</h5>
<pre>//methods can be chained together to build a query 
    //at the end of chain get() method to trigger execution of query
    $usersOfType = DB::table('user')
		-&gt;where('type', $type)
		-&gt;get();
//contraining methods
select(), select() addSelect()
where(), orWhere()
whereBetween(colName,[low,high]) , whereNotBetween(colName,[low,high])
whereIn(colName,[1,2,3]), whereNotIn(colname,[1,2,3])
whereNull(colName), whereNotNull(colName)
whereRaw()    //queries should be carefull used as they are unescaped
	$usageOfRaw = DB::table('contacts')-&gt;whereRaw('id = 28346a')-&gt;get() 
whereExists()
distinct()
</pre>



</h5></h5></h5></ol>

  </div><a class="u-url" href="/Laravel-Basics/" hidden></a>
</article>   











      </div>
    </main>

<footer class="site-footer h-card">
  
  <div class="wrapper">


    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name"></li><li>e-mail : <a class="u-email" href="mailto:namaste@himaliworld.com">namaste@himaliworld.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/avadhuta03"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">avadhuta03</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This site is powered by Jekyll and hosted on Github.</p>
      </div>
      
    </div>

  </div>

</footer>
</body>

</html>


